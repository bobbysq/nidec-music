import time
from machine import Pin, PWM


# Construct PWM object
power = PWM(Pin(19))
enable = Pin(17, Pin.OUT)
led = Pin(25, Pin.OUT)
converted_power = 0
percent_power = 50

# Set the PWM frequency.
power.freq(2500) # Nidec recommended PWM frequency
# power.freq(15625) # PWM frequency in WPILib implementation

converted_power = 65535 * (50 / 100.0) # Set power to 50%

# print(converted_power)

power.duty_u16(int(converted_power))

def beep(hz, duration):
    power.freq(hz)
    time.sleep_ms(duration)

enable.low()
led.high()

# SMB3 Athletic Theme
# Notes from https://connysoderholm.com/playing-super-mario-theme-music-with-python/

beep(480,200)
beep(1568,200)
beep(1568,200)
beep(1568,200)

beep(740,200)
beep(784,200)
beep(784,200)
beep(784,200)
beep(370,200)
beep(392,200)
beep(370,200)
beep(392,200)
beep(392,400)
beep(196,400)

beep(740,200)
beep(784,200)
beep(784,200)
beep(740,200)
beep(784,200)
beep(784,200)
beep(740,200)
beep(84,200)
beep(880,200)
beep(831,200)
beep(880,200)
beep(988,400)
beep(880,200)
beep(784,200)
beep(699,200)
beep(740,200)
beep(784,200)
beep(784,200)
beep(740,200)
beep(784,200)
beep(784,200)
beep(740,200)
beep(784,200)
beep(880,200)
beep(830,200)
beep(880,200)
beep(988,400)
time.sleep(200/1000)
beep(1108,10)
beep(1174,200)
beep(1480,10)
beep(1568,200)
time.sleep(200/1000)
beep(740,200)
beep(784,200)
beep(784,200)
beep(740,200)
beep(784,200)
beep(784,200)
beep(740,200)
beep(784,200)
beep(880,200)
beep(830,200)
beep(880,200)
beep(988,400)
beep(880,200)
beep(784,200)
beep(699,200)
beep(659,200)
beep(699,200)
beep(784,200)
beep(880,400)
beep(784,200)
beep(699,200)
beep(659,200)

beep(587,200)
beep(659,200)
beep(699,200)
beep(784,400)
beep(699,200)
beep(659,200)
beep(587,200)

beep(523,200)
beep(587,200)
beep(659,200)
beep(699,400)
beep(659,200)
beep(587,200)
beep(494,200)
beep(523,200)
time.sleep(400/1000)
beep(349,400)
beep(392,200)
beep(330,200)
beep(523,200)
beep(494,200)
beep(466,200)

beep(440,200)
beep(494,200)
beep(523,200)
beep(880,200)
beep(494,200)
beep(880,200)
beep(1760,200)
beep(440,200)

beep(392,200)
beep(440,200)
beep(494,200)
beep(784,200)
beep(440, 200)
beep(784,200)
beep(1568,200)
beep(392,200)

beep(349,200)
beep(392,200)
beep(440,200)
beep(699,200)
beep(415,200)
beep(699,200)
beep(1397,200)
beep(349,200)

beep(330,200)
beep(311,200)
beep(330,200)
beep(659,200)
beep(699,400)
beep(784,400)

beep(440,200)
beep(494,200)
beep(523,200)
beep(880,200)
beep(494,200)
beep(880,200)
beep(1760,200)
beep(440,200)

beep(392,200)
beep(440,200)
beep(494,200)
beep(784,200)
beep(440,200)
beep(784,200)
beep(1568,200)
beep(392,200)

beep(349,200)
beep(392,200)
beep(440,200)
beep(699,200)
beep(659,200)
beep(699,200)
beep(740,200)
beep(784,200)
beep(392,200)
beep(392,200)
beep(392,200)
beep(392,200)
beep(196,200)
beep(196,200)
beep(196,200)

beep(185,200)
beep(196,200)
beep(185,200)
beep(196,200)
beep(208,200)
beep(220,200)
beep(233,200)
beep(247,200)
print("song finished")

enable.high()
led.low()

# power.duty_u16(0)

# while True:
#     # percent_power = input('Input a power (0-100, 50 = neutral): ')
#     # converted_power = 65535 * (int(percent_power) / 100.0)
#     # power.duty_u16(int(converted_power))
#     new_freq = input('Input frequency: ')
#     power.freq(int(new_freq))